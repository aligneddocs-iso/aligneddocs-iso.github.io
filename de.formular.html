<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Zusammenfassung – ISO 9001 | AlignedDocs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Zusammenfassung Ihrer Angaben für das ISO-9001-Handbuch.">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<a class="skip" href="#content">Zum Inhalt springen</a>

<header class="site-header">
  <div class="container header-inner">
    <div class="brand">
      <div class="brand-mark"><span></span></div>
      <div class="brand-text">
        <strong>AlignedDocs</strong><br>
        <small>ISO 9001:2015 – automatisiertes Handbuch</small>
      </div>
    </div>
  </div>
</header>

<main id="content" class="container">

  <section class="hero small">
    <h1>Zusammenfassung Ihrer Angaben</h1>
    <p class="lead">
      Bitte prüfen Sie Ihre Angaben sorgfältig.
      Wenn etwas nicht stimmt, können Sie jederzeit zurückgehen und korrigieren.
    </p>
  </section>

  <!-- SUMMARY OUTPUT -->
  <section id="summary"></section>

  <div class="actions">
    <a href="de.formular.html" class="btn btn-ghost">
      Zurück & bearbeiten
    </a>

    <button class="btn btn-primary" id="confirmBtn">
      Angaben bestätigen
    </button>
  </div>

</main>

<footer class="site-footer">
  <div class="container footer-inner">
    <small>© 2026 AlignedDocs</small>
  </div>
</footer>

<script>
/* ================================
   LOAD DATA (SESSION)
================================ */
const data = JSON.parse(sessionStorage.getItem("isoFormData") || "{}");
const summary = document.getElementById("summary");

/* ================================
   FIELD LABELS (HUMAN READABLE)
================================ */
const labels = {
  company_name: "Unternehmensname",
  industry: "Branche / Geschäftstätigkeit",
  employees: "Anzahl der Mitarbeitenden",
  region: "Land / Region der Tätigkeit",

  quality_understanding: "Qualitätsverständnis",
  quality_goals: "Qualitätsziele vorhanden",
  quality_goals_description: "Beschreibung der Qualitätsziele",

  scope_included: "Abgedeckte Tätigkeiten (Scope)",
  scope_exclusions: "Ausgeschlossene Tätigkeiten",
  scope_exclusions_description: "Beschreibung der Ausschlüsse",

  core_process: "Typischer Auftragsablauf",
  critical_steps: "Kritische Schritte",
  external_partners: "Externe Dienstleister / Lieferanten",

  existing_docs: "Vorhandene Dokumentation",
  doc_storage: "Dokumentenablage",

  monitoring: "Überwachung der Prozesse",
  complaints: "Umgang mit Fehlern / Beschwerden",

  email: "E-Mail-Adresse"
};

/* ================================
   RENDER SUMMARY (STABLE)
================================ */
Object.entries(data).forEach(([key, value]) => {
  if (!value) return;

  const block = document.createElement("section");
  block.className = "form-section";

  block.innerHTML = `
    <label>${labels[key] || key}</label>
    <div class="review-box">${value}</div>
  `;

  summary.appendChild(block);
});

/* ================================
   CONFIRM ACTION (READY FOR n8n)
================================ */
document.getElementById("confirmBtn").addEventListener("click", () => {
  alert("Angaben bestätigt. Die Verarbeitung startet im nächsten Schritt.");
  // später hier: fetch() → n8n Webhook
});
</script>

</body>
</html>
