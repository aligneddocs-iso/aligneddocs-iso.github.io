<!DOCTYPE html>
<html lang="de">
<head>

  <!-- üîí HARD GUARD: verhindert Direktaufruf & Flackern -->
  <script>
    (function () {
      const raw = sessionStorage.getItem("isoFormData");
      if (!raw || raw === "{}") {
        window.location.replace("de.formular.html");
      }
    })();
  </script>

  <meta charset="utf-8">
  <title>Zusammenfassung ‚Äì ISO 9001 | AlignedDocs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Zusammenfassung Ihrer Angaben f√ºr das ISO-9001-Handbuch.">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<a class="skip" href="#content">Zum Inhalt springen</a>

<header class="site-header">
  <div class="container header-inner">
    <div class="brand">
      <div class="brand-mark"><span></span></div>
      <div class="brand-text">
        <strong>AlignedDocs</strong><br>
        <small>ISO 9001:2015 ‚Äì automatisiertes Handbuch</small>
      </div>
    </div>
  </div>
</header>

<main id="content" class="container">

  <section class="hero small">
    <h1>Zusammenfassung Ihrer Angaben</h1>
    <p class="lead">
      Bitte pr√ºfen Sie Ihre Angaben sorgf√§ltig.
      Auf Basis dieser Informationen wird Ihr individuelles ISO-9001-Handbuch erstellt.
    </p>
  </section>

  <!-- ZUSAMMENFASSUNG -->
  <section class="form-section" id="summary"></section>

  <!-- BEST√ÑTIGUNG -->
  <section class="form-section">

    <label class="checkbox">
      <input type="checkbox" id="confirmEmail">
      Ich best√§tige, dass die oben angegebene E-Mail-Adresse korrekt ist und dass ich die Zusammenfassung
      sowie die weiteren Schritte zur Erstellung meines ISO-9001-Handbuchs per E-Mail erhalte.
    </label>

    <p id="confirmError" style="display:none; color:#ff6b6b; margin-top:12px; font-size:14px;">
      Bitte best√§tigen Sie die E-Mail-Adresse, um fortzufahren.
    </p>

    <div class="actions">
      <a href="de.formular.html" class="btn btn-ghost">Zur√ºck & bearbeiten</a>
      <button class="btn btn-primary" id="confirmBtn">
        Angaben verbindlich best√§tigen
      </button>
    </div>

  </section>

</main>

<footer class="site-footer">
  <div class="container footer-inner">
    <small>¬© 2026 AlignedDocs</small>
  </div>
</footer>

<script>
/* ================================
   LOAD DATA
================================ */
const data = JSON.parse(sessionStorage.getItem("isoFormData") || "{}");
const summary = document.getElementById("summary");

/* ================================
   LABELS (sauber & professionell)
================================ */
const labels = {
  company_name: "Unternehmensname",
  industry: "Branche / Gesch√§ftst√§tigkeit",
  employees: "Anzahl der Mitarbeitenden",
  region: "Land / Region",

  quality_understanding: "Qualit√§tsverst√§ndnis",
  quality_goals: "Qualit√§tsziele vorhanden",
  quality_goals_description: "Beschreibung der Qualit√§tsziele",

  scope_included: "Geltungsbereich (Scope)",
  scope_exclusions: "Ausgeschlossene T√§tigkeiten",
  scope_exclusions_description: "Beschreibung der Ausschl√ºsse",

  core_process: "Typischer Auftragsablauf",
  critical_steps: "Kritische Prozessschritte",
  external_partners: "Externe Dienstleister / Lieferanten",

  existing_docs: "Vorhandene Dokumentation",
  doc_storage: "Dokumentenablage",

  monitoring: "Prozess√ºberwachung",
  complaints: "Umgang mit Fehlern / Beschwerden",

  email: "E-Mail-Adresse f√ºr R√ºckfragen & Zustellung"
};

/* ================================
   RENDER SUMMARY (E-Mail sichtbar)
================================ */
Object.entries(data).forEach(([key, value]) => {
  if (!value) return;

  const block = document.createElement("div");
  block.style.marginBottom = "18px";

  block.innerHTML = `
    <label>${labels[key] || key}</label>
    <div class="review-box">${value}</div>
  `;

  summary.appendChild(block);
});

/* ================================
   CONFIRM CHECK
================================ */
document.getElementById("confirmBtn").addEventListener("click", () => {
  const ok = document.getElementById("confirmEmail").checked;
  const err = document.getElementById("confirmError");

  if (!ok) {
    err.style.display = "block";
    return;
  }

  err.style.display = "none";

  alert("Vielen Dank. Ihre Angaben wurden best√§tigt. Die n√§chsten Schritte erhalten Sie per E-Mail.");

  // N√ÑCHSTER SCHRITT:
  // fetch("N8N_WEBHOOK_URL", { method: "POST", body: JSON.stringify(data) });
});
</script>

</body>
</html>
